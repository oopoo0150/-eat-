<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.closet.great.dao.IBoardDao">

	<!-- 게시글 리스트 가져오기 
	<select id="getBoardList" resultType="info"
		parameterType="int">
	<![CDATA[
		SELECT * FROM INFO WHERE IN_RONUM>=#{num}*10-9
		AND IN_RONUM<=#{num}*10
	]]>
	</select>
	-->
	
	<!-- 게시글 리스트 가져오기 -->
	<select id="getBoardList" resultType="info"
		parameterType="HashMap">
	<![CDATA[
		SELECT * FROM ${table} WHERE IN_RONUM>=${num}*10-9
		AND IN_RONUM<=${num}*10
	]]>
	</select>
	
	<update id="ClickBoard">
		UPDATE INFOBOARD SET IN_VIEWS = IN_VIEWS + 1 WHERE IN_NUM = #{num}
	</update>
	
	
	<!-- 페이징 게시글 카운트 -->
	<select id="getBoardCount" resultType="int" parameterType="HashMap">
		SELECT COUNT(*) FROM ${table}
	</select>
	
	<!-- 게시글 상세보기 -->
	<select id="getContents" resultType="info" parameterType="int">
		SELECT * FROM INFOBOARD WHERE IN_NUM=#{num}
	</select>	

	<!-- 게시글 insert -->
	<insert id="writeInsert" parameterType="info">
			INSERT INTO INFOBOARD(IN_NUM, IN_CATE, IN_TITLE, IN_CONTENT, IN_SID) VALUES (INFOBOARD_SEQ.NEXTVAL, #{in_cate}, #{in_title}, #{in_content}, #{in_sid})
	</insert>
	
	<!-- 게시글 update -->
	<insert id="update" parameterType="info">
			UPDATE INFOBOARD SET IN_CATE = #{in_cate}, IN_TITLE = #{in_title}, IN_CONTENT = #{in_content} WHERE IN_NUM = #{in_num}
	</insert>
	
	<!-- 게시글 delete -->
	<insert id="delete" parameterType="Integer">
			DELETE FROM INFOBOARD WHERE IN_NUM = #{num}
	</insert>
	
	<!-- 댓글 출력 -->
	<select id="getReplyList" parameterType="int" resultType="infoReply">
		SELECT * FROM INFOBOARD_REPLY WHERE INR_INNUM=#{num}
	</select>
	
	<!-- 댓글 입력 -->
	<insert id="replyInsert" parameterType="infoReply">
		INSERT INTO INFOBOARD_REPLY(INR_NUM, INR_CONTENT, INR_INNUM, INR_SID) VALUES(INFOBOARD_REPLY_SEQ.NEXTVAL, #{inr_content}, #{inr_innum}, #{inr_sid})
	</insert>
	
	<!-- 댓글 게시글 번호 가져오기 -->
	<select id="getBoardnum" parameterType="Integer" resultType="int">
		SELECT INR_INNUM FROM INFOBOARD_REPLY WHERE INR_NUM=#{no}
	</select>
	
	<!-- 댓글 수정 -->
	<insert id="replyUpdate" parameterType="infoReply">
		UPDATE INFOBOARD_REPLY SET INR_CONTENT= #{inr_content} WHERE INR_NUM = #{inr_num}
	</insert>
	
	
	<!-- 댓글 삭제 -->
	<delete id="replyDelete" parameterType="Integer">
		DELETE FROM INFOBOARD_REPLY WHERE INR_NUM=#{num}
	</delete>
	
	<!-- 댓글 삭제(게시판 삭제) -->
	<delete id="replyBoardDelete" parameterType="Integer">
		DELETE FROM INFOBOARD_REPLY WHERE INR_INNUM=#{num}
	</delete>
	
	
	
	
</mapper>